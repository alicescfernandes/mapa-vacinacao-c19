{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/pi/Web/mapa-vacinacao-c19/components/graphs/PieSuscetiveisProporcao.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport { Pie } from 'react-chartjs-2';\nimport { COLOR_1 } from '../../constants';\nimport { Card } from './../Card';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nimport { formatNumber } from './../../utils';\nexport function PieSuscetiveisProporcao(_ref) {\n  _s();\n\n  var statistics = _ref.statistics,\n      colors = _ref.colors;\n\n  var _useState = useState(true),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _statistics$getDiario = statistics.getDiariosInoculacoes(),\n      values = _statistics$getDiario.values,\n      labels = _statistics$getDiario.labels,\n      valuesIn1 = _statistics$getDiario.valuesIn1,\n      valuesIn2 = _statistics$getDiario.valuesIn2;\n\n  var _statistics$getDiario2 = statistics.getDiariosCases(),\n      valueCasesDiarios = _statistics$getDiario2.values;\n\n  var vaccines = statistics.getRaw();\n  var firstItem = valueCasesDiarios.reverse()[0];\n  var infetadosVacinados = vaccines[vaccines.length - 1].Inoculacao2_Ac - firstItem.ConfirmadosAcumulado;\n  var populacao_suscetivel = 10286300 - (vaccines[vaccines.length - 1].Inoculacao2_Ac + firstItem.Activos + firstItem.Recuperados + firstItem.Obitos); //let populacao_suscetivel = 10286300 - (vaccines[vaccines.length - 1].Inoculacao2_Ac + infetadosVacinados + firstItem.Recuperados + firstItem.Obitos);\n\n  var main = colors.main,\n      shades = colors.shades,\n      tints = colors.tints,\n      complements = colors.complements;\n\n  var data = function data(canvas) {\n    return {\n      //labels: ['Vacinados (com as duas doses)', 'Casos Ativos', 'Casos Recuperados', 'Óbitos', 'População suscetível'],\n      labels: ['Vacinados (com as duas doses)', 'Casos Ativos', 'Casos Recuperados', 'Óbitos', 'População suscetível'],\n      datasets: [{\n        backgroundColor: [main, complements[0], complements[2], shades[2], complements[1]],\n        data: [vaccines[vaccines.length - 1].Inoculacao2_Ac, valueCasesDiarios.reverse()[0].Activos, valueCasesDiarios.reverse()[0].Recuperados, valueCasesDiarios.reverse()[0].Obitos, populacao_suscetivel] //data: [vaccines[vaccines.length - 1].Inoculacao2_Ac, valueCasesDiarios.reverse()[0].Activos, valueCasesDiarios.reverse()[0].Recuperados, valueCasesDiarios.reverse()[0].Obitos, populacao_suscetivel],\n\n      }]\n    };\n  };\n\n  var options = function options() {\n    return {\n      maintainAspectRatio: false,\n      plugins: {\n        datalabels: {\n          color: 'white',\n          formatter: function formatter(value, chart) {\n            var sum = chart.dataset.data.reduce(function (prev, curr) {\n              return prev + curr;\n            }, 0);\n            sum = value / sum * 100;\n\n            if (sum > 10) {\n              return sum.toFixed(2) + '%';\n            }\n\n            return '';\n          }\n        }\n      },\n      onResize: function onResize(a, b, c) {},\n      legend: {\n        position: 'bottom',\n        align: 'start'\n      },\n      animation: {\n        duration: 1000\n      },\n      tooltips: {\n        callbacks: {\n          label: function label(_ref2, _ref3) {\n            var index = _ref2.index;\n            var datasets = _ref3.datasets,\n                labels = _ref3.labels;\n            var label = labels[index];\n            var data = datasets[0].data[index];\n            return \"\".concat(label, \": \").concat(formatNumber(data));\n          }\n        }\n      }\n    };\n  };\n\n  useEffect(function () {\n    if (values.length > 0) {\n      setLoading(false);\n    }\n  }, [values, labels]);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    allowOverflow: true,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: !loading ? /*#__PURE__*/_jsxDEV(Pie, {\n        plugins: [ChartDataLabels],\n        height: 350,\n        options: options(),\n        data: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this) : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 3\n  }, this);\n}\n\n_s(PieSuscetiveisProporcao, \"J7PPXooW06IQ11rfabbvgk72KFw=\");\n\n_c = PieSuscetiveisProporcao;\n\nvar _c;\n\n$RefreshReg$(_c, \"PieSuscetiveisProporcao\");","map":{"version":3,"sources":["/home/pi/Web/mapa-vacinacao-c19/components/graphs/PieSuscetiveisProporcao.jsx"],"names":["useEffect","useRef","useState","Bar","Pie","COLOR_1","Card","ChartDataLabels","formatNumber","PieSuscetiveisProporcao","statistics","colors","loading","setLoading","getDiariosInoculacoes","values","labels","valuesIn1","valuesIn2","getDiariosCases","valueCasesDiarios","vaccines","getRaw","firstItem","reverse","infetadosVacinados","length","Inoculacao2_Ac","ConfirmadosAcumulado","populacao_suscetivel","Activos","Recuperados","Obitos","main","shades","tints","complements","data","canvas","datasets","backgroundColor","options","maintainAspectRatio","plugins","datalabels","color","formatter","value","chart","sum","dataset","reduce","prev","curr","toFixed","onResize","a","b","c","legend","position","align","animation","duration","tooltips","callbacks","label","index"],"mappings":"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","sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport { Pie } from 'react-chartjs-2';\nimport { COLOR_1 } from '../../constants';\nimport { Card } from './../Card';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nimport { formatNumber } from './../../utils';\nexport function PieSuscetiveisProporcao({ statistics, colors }) {\n\tlet [loading, setLoading] = useState(true);\n\tlet { values, labels, valuesIn1, valuesIn2 } = statistics.getDiariosInoculacoes();\n\tlet { values: valueCasesDiarios } = statistics.getDiariosCases();\n\tlet vaccines = statistics.getRaw();\n\tlet firstItem = valueCasesDiarios.reverse()[0];\n\tlet infetadosVacinados = vaccines[vaccines.length - 1].Inoculacao2_Ac - firstItem.ConfirmadosAcumulado;\n\tlet populacao_suscetivel = 10286300 - (vaccines[vaccines.length - 1].Inoculacao2_Ac + firstItem.Activos + firstItem.Recuperados + firstItem.Obitos);\n\t//let populacao_suscetivel = 10286300 - (vaccines[vaccines.length - 1].Inoculacao2_Ac + infetadosVacinados + firstItem.Recuperados + firstItem.Obitos);\n\n\tlet { main, shades, tints, complements } = colors;\n\n\tconst data = (canvas) => {\n\t\treturn {\n\t\t\t//labels: ['Vacinados (com as duas doses)', 'Casos Ativos', 'Casos Recuperados', 'Óbitos', 'População suscetível'],\n\t\t\tlabels: ['Vacinados (com as duas doses)', 'Casos Ativos', 'Casos Recuperados', 'Óbitos', 'População suscetível'],\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tbackgroundColor: [main, complements[0], complements[2], shades[2], complements[1]],\n\t\t\t\t\tdata: [vaccines[vaccines.length - 1].Inoculacao2_Ac, valueCasesDiarios.reverse()[0].Activos, valueCasesDiarios.reverse()[0].Recuperados, valueCasesDiarios.reverse()[0].Obitos, populacao_suscetivel],\n\t\t\t\t\t//data: [vaccines[vaccines.length - 1].Inoculacao2_Ac, valueCasesDiarios.reverse()[0].Activos, valueCasesDiarios.reverse()[0].Recuperados, valueCasesDiarios.reverse()[0].Obitos, populacao_suscetivel],\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t};\n\tconst options = () => {\n\t\treturn {\n\t\t\tmaintainAspectRatio: false,\n\t\t\tplugins: {\n\t\t\t\tdatalabels: {\n\t\t\t\t\tcolor: 'white',\n\t\t\t\t\tformatter: (value, chart) => {\n\t\t\t\t\t\tlet sum = chart.dataset.data.reduce((prev, curr) => {\n\t\t\t\t\t\t\treturn prev + curr;\n\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\tsum = (value / sum) * 100;\n\n\t\t\t\t\t\tif (sum > 10) {\n\t\t\t\t\t\t\treturn sum.toFixed(2) + '%';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tonResize: (a, b, c) => {},\n\t\t\tlegend: {\n\t\t\t\tposition: 'bottom',\n\t\t\t\talign: 'start',\n\t\t\t},\n\n\t\t\tanimation: {\n\t\t\t\tduration: 1000,\n\t\t\t},\n\t\t\ttooltips: {\n\t\t\t\tcallbacks: {\n\t\t\t\t\tlabel: function ({ index }, { datasets, labels }) {\n\t\t\t\t\t\tlet label = labels[index];\n\t\t\t\t\t\tlet data = datasets[0].data[index];\n\t\t\t\t\t\treturn `${label}: ${formatNumber(data)}`;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t};\n\n\tuseEffect(() => {\n\t\tif (values.length > 0) {\n\t\t\tsetLoading(false);\n\t\t}\n\t}, [values, labels]);\n\n\treturn (\n\t\t<Card allowOverflow={true}>\n\t\t\t<div>{!loading ? <Pie plugins={[ChartDataLabels]} height={350} options={options()} data={data} /> : ''}</div>\n\t\t</Card>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}