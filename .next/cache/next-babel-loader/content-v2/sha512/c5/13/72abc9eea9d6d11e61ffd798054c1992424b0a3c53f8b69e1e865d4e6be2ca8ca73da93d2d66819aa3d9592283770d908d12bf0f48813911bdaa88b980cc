{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport '../styles/globals.scss';\nimport { trackPlausible } from '../utils';\nimport { Footer } from '../components/Footer';\nimport { Metatags } from '../components/MetaTags';\nimport { Header } from '../components/Header';\nimport { RegiaoContext } from './../components/context/regiao';\nimport { useEffect } from 'react';\nimport { initSockets } from '../hooks/initSockets';\n\nfunction NextApp({\n  Component,\n  props\n}) {\n  // Unconventional way of not having multiple sockets connected between pages\n  useEffect(() => {\n    initSockets(function (data) {\n      let event = new Event('socket_update');\n      event.data = data;\n      window.dispatchEvent(event);\n    });\n\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.register('/sw.js', {\n        scope: './'\n      }).then(function (registration) {\n        /* success */\n      }, function (error) {\n        /* error */\n      });\n    } else {//not supported\n    }\n  }, []);\n  return /*#__PURE__*/_jsxs(RegiaoContext.Provider, {\n    value: props.regiao,\n    children: [/*#__PURE__*/_jsx(Metatags, {}), /*#__PURE__*/_jsx(Header, {}), /*#__PURE__*/_jsx(Component, {}), /*#__PURE__*/_jsx(Footer, {})]\n  });\n}\n\nNextApp.getInitialProps = async app => {\n  var _app$ctx, _app$ctx$req;\n\n  trackPlausible(app.ctx.req);\n  let url = (app === null || app === void 0 ? void 0 : (_app$ctx = app.ctx) === null || _app$ctx === void 0 ? void 0 : (_app$ctx$req = _app$ctx.req) === null || _app$ctx$req === void 0 ? void 0 : _app$ctx$req.url.replace('/', '')) || app.ctx.pathname.replace('/', '');\n  url = url.split('?')[0];\n  let regiao = 'portugal';\n\n  if (url !== '') {\n    regiao = url;\n  }\n\n  return {\n    props: {\n      regiao: regiao,\n      pusher: ''\n    }\n  };\n};\n\nexport default NextApp;","map":null,"metadata":{},"sourceType":"module"}