{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { useEffect, useState } from 'react';\nimport { Col, Container, Row } from 'react-bootstrap';\nimport { Counter } from '../../components/Counter';\nimport { DatePickerButton } from '../../components/DatePickerButton';\nimport { NumeroTotalVacinados } from '../../components/graphs/NumeroTotalVacinados';\nimport { VacinadosPorDia } from '../../components/graphs/VacinadosPorDia';\nimport { useData } from '../../hooks/useData';\nimport styles from '../../styles/Home.module.scss';\nimport { useRouter } from 'next/router';\nimport Error from 'next/error';\nimport Plausible from 'plausible-tracker';\nvar plausible = Plausible({\n  domain: 'vacinacaocovid19.pt',\n  trackLocalhost: true\n});\nimport { useColors } from './../../hooks/useColors';\nexport default function Embed() {\n  var router = useRouter();\n  var _router$query = router.query,\n      id = _router$query.id,\n      queryColors = _router$query.colors;\n\n  var _useColors = useColors(),\n      colors = _useColors.colors,\n      tints = _useColors.tints,\n      shades = _useColors.shades,\n      complement = _useColors.complement,\n      setColors = _useColors.setColors;\n\n  var _useData = useData(),\n      statistics = _useData.statistics,\n      labels = _useData.labels,\n      values = _useData.values;\n\n  var rawData = statistics.getRaw();\n\n  var _statistics$getVacina = statistics.getVacinadosAcum(),\n      valuesIn1 = _statistics$getVacina.valuesIn1,\n      valuesIn2 = _statistics$getVacina.valuesIn2;\n\n  var _useState = useState({}),\n      selectedItem = _useState[0],\n      setSelectedItem = _useState[1];\n\n  var _useState2 = useState({}),\n      previousItem = _useState2[0],\n      setPreviousItem = _useState2[1];\n\n  var _useState3 = useState({}),\n      previousSelectedItem = _useState3[0],\n      setPreviousSelectedItem = _useState3[1];\n\n  var _useState4 = useState({}),\n      last = _useState4[0],\n      setLast = _useState4[1];\n\n  var _useState5 = useState({}),\n      first = _useState5[0],\n      setFirst = _useState5[1];\n\n  var _useState6 = useState(false),\n      loaded = _useState6[0],\n      setLoaded = _useState6[1];\n\n  function onDateSelect(d) {\n    var item = rawData.filter(function (el, elIdx) {\n      if (el.Data == d.getTime()) {\n        if (elIdx - 1 >= 0) {\n          setPreviousItem(rawData[elIdx - 1]);\n        } else {\n          setPreviousItem(el);\n        }\n\n        return true;\n      }\n    });\n\n    if (selectedItem.Data != item[0].Data) {\n      setPreviousSelectedItem(selectedItem);\n      setSelectedItem(item[0]);\n    }\n  }\n\n  useEffect(function () {\n    var rawData = statistics.getRaw();\n    setLast(rawData[rawData.length - 1]);\n    onDateSelect(new Date(rawData[rawData.length - 1].Data));\n  }, [values]);\n  useEffect(function () {\n    setLast(rawData[rawData.length - 1]);\n    setSelectedItem(rawData[rawData.length - 1]);\n    setPreviousItem(rawData[rawData.length - 2]);\n    setFirst(rawData[0]);\n    setLoaded(true);\n    plausible.trackPageview();\n  }, []);\n  useEffect(function () {\n    if (queryColors != undefined) {\n      setColors(_toConsumableArray(queryColors.map(function (c) {\n        return '#' + c;\n      })));\n    }\n  }, [queryColors]);\n\n  var content = /*#__PURE__*/_jsx(Row, {\n    children: /*#__PURE__*/_jsx(Col, {\n      children: /*#__PURE__*/_jsx(\"p\", {\n        style: {\n          padding: '20px',\n          textAlign: 'center'\n        },\n        children: \"A carregar...\"\n      })\n    })\n  });\n\n  var css = \":root{\\n\\t\\t--foreground:\".concat(colors[0], \"\\n\\t\\t}\");\n\n  if (id) {\n    switch (id) {\n      case 'counter':\n        content = /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(_Fragment, {\n            children: /*#__PURE__*/_jsx(\"style\", {\n              children: css\n            })\n          }), /*#__PURE__*/_jsx(Row, {\n            className: styles.datepickerRow,\n            children: /*#__PURE__*/_jsx(Col, {\n              style: {\n                textAlign: 'center'\n              },\n              children: loaded ? /*#__PURE__*/_jsx(DatePickerButton, {\n                colors: colors,\n                onDateSelect: onDateSelect,\n                minDate: first.Data,\n                maxDate: last.Data\n              }) : ''\n            })\n          }), /*#__PURE__*/_jsxs(Row, {\n            children: [/*#__PURE__*/_jsx(Col, {\n              lg: 4,\n              xs: 12,\n              children: /*#__PURE__*/_jsx(Counter, {\n                colors: colors,\n                title: \"N\\xFAmero total de vacinas administradas\",\n                subtitle: \"\",\n                yesterday: previousItem === null || previousItem === void 0 ? void 0 : previousItem.Vacinados_Ac,\n                from: (previousSelectedItem === null || previousSelectedItem === void 0 ? void 0 : previousSelectedItem.Vacinados_Ac) || 0,\n                to: selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.Vacinados_Ac\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              lg: 4,\n              xs: 12,\n              children: /*#__PURE__*/_jsx(Counter, {\n                colors: colors,\n                title: \"N\\xFAmero de doses administradas - 1\\xAA Dose\",\n                subtitle: \"Vacina Pfizer/BioNTech\",\n                yesterday: previousItem === null || previousItem === void 0 ? void 0 : previousItem.Inoculacao1_Ac,\n                from: (previousSelectedItem === null || previousSelectedItem === void 0 ? void 0 : previousSelectedItem.Inoculacao1_Ac) || 0,\n                to: selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.Inoculacao1_Ac\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              lg: 4,\n              xs: 12,\n              children: /*#__PURE__*/_jsx(Counter, {\n                colors: colors,\n                title: \"N\\xFAmero de doses administradas - 2\\xAA Dose\",\n                subtitle: \"Vacina Pfizer/BioNTech\",\n                yesterday: previousItem === null || previousItem === void 0 ? void 0 : previousItem.Inoculacao2_Ac,\n                from: (previousSelectedItem === null || previousSelectedItem === void 0 ? void 0 : previousSelectedItem.Inoculacao2_Ac) || 0,\n                to: selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.Inoculacao2_Ac\n              })\n            })]\n          })]\n        });\n        break;\n\n      case 'line':\n        content = /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsx(NumeroTotalVacinados, {\n            colors: colors,\n            labels: labels,\n            values: values,\n            valuesIn1: valuesIn1,\n            valuesIn2: valuesIn2\n          })\n        });\n        break;\n\n      case 'bar':\n        content = /*#__PURE__*/_jsx(_Fragment, {\n          children: /*#__PURE__*/_jsx(VacinadosPorDia, {\n            colors: colors,\n            labels: labels,\n            values: values,\n            statistics: statistics\n          })\n        });\n        break;\n\n      default:\n        content = /*#__PURE__*/_jsx(Error, {\n          statusCode: 404\n        });\n    }\n  }\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: content\n  }); // <Footer></Footer>\n}","map":null,"metadata":{},"sourceType":"module"}