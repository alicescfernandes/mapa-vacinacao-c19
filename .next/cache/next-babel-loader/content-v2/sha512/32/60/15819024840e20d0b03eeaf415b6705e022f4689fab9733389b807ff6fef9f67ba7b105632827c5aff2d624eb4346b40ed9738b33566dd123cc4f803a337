{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect, useRef, useState } from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport { RESIZE_TRESHOLD } from '../../constants';\nimport { formatNumber } from '../../utils';\nimport { Card } from './../Card';\nexport function VacinadosPorDia({\n  statistics,\n  colors\n}) {\n  let {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  let {\n    values,\n    labels,\n    valuesIn1,\n    valuesIn2\n  } = statistics.getDiariosInoculacoes();\n  let {\n    values: values2\n  } = statistics.getMediaMovelDiaria(7);\n  let [foreground, color_1, color_2,, color_4] = colors;\n  const canvasRef = useRef(null);\n\n  const data = canvas => {\n    if (window.innerWidth <= RESIZE_TRESHOLD) {\n      canvas.parentNode.style.width = RESIZE_TRESHOLD + 'px';\n    } else {\n      canvas.parentNode.style.width = '100%';\n    }\n\n    window.addEventListener('resize', () => {\n      if (window.innerWidth <= RESIZE_TRESHOLD) {\n        canvas.parentNode.style.width = RESIZE_TRESHOLD + 'px';\n      } else {\n        canvas.parentNode.style.width = '100%';\n      }\n    });\n    return {\n      labels: labels,\n      datasets: [{\n        label: 'Vacinas diárias - Média movel de 7 dias',\n        fill: false,\n        lineTension: 0.5,\n        overlayBars: true,\n        type: 'line',\n        lineBorder: 1,\n        borderWidth: 3,\n        borderColor: color_4,\n        borderJoinStyle: 'miter',\n        pointBorderColor: color_4,\n        pointBackgroundColor: color_4,\n        pointBorderWidth: 1,\n        pointHoverRadius: 3,\n        pointHoverBorderWidth: 2,\n        pointRadius: 1,\n        pointHitRadius: 10,\n        data: values2,\n        order: 1\n      }, {\n        label: 'Inoculação - 2ª Dose',\n        fill: false,\n        type: 'bar',\n        overlayBars: true,\n        backgroundColor: foreground,\n        data: valuesIn2,\n        order: 2,\n        display: false,\n        stack: 'stack0'\n      }, {\n        label: 'Inoculação - 1ª Dose',\n        backgroundColor: color_1,\n        borderColor: color_1,\n        data: valuesIn1,\n        overlayBars: true,\n        order: 3,\n        stack: 'stack0'\n      }, {\n        label: 'Vacinas Totais',\n        type: 'bar',\n        overlayBars: true,\n        backgroundColor: color_2,\n        data: values,\n        order: 4,\n        yAxisID: 'total',\n        stack: 'stack0'\n      }]\n    };\n  };\n\n  let numberFormatter = new Intl.NumberFormat();\n\n  const options = () => {\n    return {\n      layout: {\n        padding: -5\n      },\n      plugins: {\n        datalabels: {\n          display: false,\n          color: 'blue'\n        }\n      },\n      legend: {\n        position: 'bottom',\n        align: 'start'\n      },\n      animation: {\n        duration: 1000\n      },\n      tooltips: {\n        mode: 'index',\n        intersect: false,\n        callbacks: {\n          label: (tooltipItem, data) => {\n            var label = data.datasets[tooltipItem.datasetIndex].label;\n            return label + ': ' + numberFormatter.format(parseInt(tooltipItem.value)).replace(',', ' ');\n          },\n          title: (tooltipItem, data) => {\n            return 'Dia ' + tooltipItem[0].label;\n          }\n        }\n      },\n      scales: {\n        yAxes: [{\n          stacked: true,\n          ticks: {\n            beginAtZero: false,\n            maxTicksLimit: window.innerWidth <= RESIZE_TRESHOLD ? 8 : 10,\n            minTicksLimit: window.innerWidth <= RESIZE_TRESHOLD ? 8 : 10,\n            callback: function (value, index, values) {\n              return formatNumber(value, false);\n            }\n          }\n        }, {\n          stacked: true,\n          id: 'total',\n          display: false\n        }],\n        xAxes: [{\n          stacked: true,\n          ticks: {\n            beginAtZero: true,\n            maxTicksLimit: window.innerWidth <= RESIZE_TRESHOLD ? 30 : 60,\n            minTicksLimit: window.innerWidth <= RESIZE_TRESHOLD ? 30 : 60\n          }\n        }]\n      }\n    };\n  };\n\n  useEffect(() => {\n    if (values.length) {\n      setLoading(false);\n    }\n  }, [values]);\n  return /*#__PURE__*/_jsx(Card, {\n    allowOverflow: true,\n    children: /*#__PURE__*/_jsx(\"div\", {\n      children: !loading ? /*#__PURE__*/_jsx(Bar, {\n        height: 80,\n        ref: canvasRef,\n        options: options(),\n        data: data\n      }) : ''\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}